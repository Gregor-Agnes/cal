## This enables the cal ics export
ics = PAGE
ics {
  typeNum = {$plugin.tx_cal_controller.view.ics.typeNum} 

/*
	# 12.12.2008 by Franz: why do we do it this way and don't use a reference which is much more flexible and also saves memory?
	10 =< plugin.tx_cal_controller
	10.view {
		day >
		week >
		month >
		year >
		calendar >
		category >
		list >
		freeAndBusy >
		other >
		search >
		search_event >
		search_location >
		search_organizer >
		admin >
		location >
		organizer >
		rss >
		create_event >
		edit_event >
		confirm_event >
		delete_event >
		create_calendar >
		edit_calendar >
		confirm_calendar >
		delete_calendar >
		create_category >
		edit_category >
		confirm_category >
		delete_category >
		create_location >
		edit_location >
		confirm_location >
		delete_location >
		create_organizer >
		edit_organizer >
		confirm_organizer >
		delete_organizer >
		translation >
	}
	10.rights {
		create >
		edit >
		delete >
	}
	10.pages >
*/
	# use a referenced copy now so that it will always reflect the current cal configuration
	10 =< plugin.tx_cal_controller
	10 {
		pages = {$plugin.tx_cal_controller.pidList}
		recursive = 1
		
		view.allowedViews = ics,single_ics
		view.ics {
			eventUidPrefix = {$plugin.tx_cal_controller.view.ics.eventUidPrefix}

			# @description	The maximum date for recurring events
			maxDate = 20090101
			minDate = 00000001

			#stdWraps, e.g. to convert Text to utf8
			event.title {
				#csConv = utf-8
			}
			event.description {
				#csConv = utf-8
			}
			event.location {
		    	#csConv = utf-8
			}
			event.category {
				#csConv = utf-8
			}
		}
		view.single_ics.event < ics.10.view.ics.event
	}
	config {
		disableAllHeaderCode = 1
		additionalHeaders = Content-type:calendar/text
		xhtml_cleaning = 0
		admPanel = 0
	}
}